<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teste de Redirecionamento - Estoca.AI</title>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            margin: 0;
            padding: 20px;
        }
        
        .test-container {
            background: rgba(255, 255, 255, 0.1);
            padding: 40px;
            border-radius: 20px;
            text-align: center;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            max-width: 500px;
        }
        
        h1 {
            margin-bottom: 20px;
            font-size: 28px;
        }
        
        .test-btn {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 10px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            margin: 10px;
            transition: all 0.3s ease;
        }
        
        .test-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(16, 185, 129, 0.3);
        }
        
        .status {
            margin-top: 20px;
            padding: 15px;
            border-radius: 10px;
            background: rgba(255, 255, 255, 0.1);
        }
        
        .success { background: rgba(16, 185, 129, 0.2); }
        .error { background: rgba(239, 68, 68, 0.2); }
        .info { background: rgba(59, 130, 246, 0.2); }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>üß™ Teste de Redirecionamento</h1>
        <p>Esta p√°gina testa se o redirecionamento para o ERP est√° funcionando.</p>
        
        <div>
            <button class="test-btn" onclick="testRedirect()">
                üîÑ Testar Redirecionamento
            </button>
            
            <button class="test-btn" onclick="testLocalStorage()">
                üíæ Testar LocalStorage
            </button>
            
            <button class="test-btn" onclick="goToERP()">
                üöÄ Ir para ERP
            </button>
        </div>
        
        <div id="status" class="status info">
            Clique em um bot√£o para testar...
        </div>
    </div>

    <script>
        function showStatus(message, type = 'info') {
            const status = document.getElementById('status');
            status.textContent = message;
            status.className = `status ${type}`;
        }

        function testRedirect() {
            showStatus('üîÑ Testando redirecionamento...', 'info');
            
            try {
                // Simular dados de login
                localStorage.setItem('isAuthenticated', 'true');
                localStorage.setItem('userData', JSON.stringify({
                    email: 'teste@estoca.ai',
                    name: 'Usu√°rio Teste',
                    role: 'User'
                }));
                
                showStatus('‚úÖ Dados salvos no localStorage', 'success');
                
                // Tentar redirecionamento
                setTimeout(() => {
                    showStatus('üîÑ Redirecionando em 3 segundos...', 'info');
                    
                    setTimeout(() => {
                        try {
                            window.location.href = 'index.html';
                        } catch (error) {
                            showStatus(`‚ùå Erro: ${error.message}`, 'error');
                        }
                    }, 3000);
                }, 1000);
                
            } catch (error) {
                showStatus(`‚ùå Erro no teste: ${error.message}`, 'error');
            }
        }

        function testLocalStorage() {
            try {
                const isAuth = localStorage.getItem('isAuthenticated');
                const userData = localStorage.getItem('userData');
                
                if (isAuth && userData) {
                    showStatus(`‚úÖ LocalStorage OK - Auth: ${isAuth}, User: ${JSON.parse(userData).name}`, 'success');
                } else {
                    showStatus('‚ö†Ô∏è LocalStorage vazio ou incompleto', 'error');
                }
            } catch (error) {
                showStatus(`‚ùå Erro no LocalStorage: ${error.message}`, 'error');
            }
        }

        function goToERP() {
            showStatus('üöÄ Indo para o ERP...', 'info');
            
            // Verificar se existe o arquivo index.html
            fetch('index.html')
                .then(response => {
                    if (response.ok) {
                        showStatus('‚úÖ index.html encontrado! Redirecionando...', 'success');
                        setTimeout(() => {
                            window.location.href = 'index.html';
                        }, 1000);
                    } else {
                        showStatus('‚ùå index.html n√£o encontrado!', 'error');
                    }
                })
                .catch(error => {
                    showStatus(`‚ùå Erro ao verificar index.html: ${error.message}`, 'error');
                });
        }

        // Verificar status inicial
        window.addEventListener('load', () => {
            const isAuth = localStorage.getItem('isAuthenticated');
            if (isAuth) {
                showStatus('‚úÖ Usu√°rio j√° autenticado!', 'success');
            } else {
                showStatus('‚ÑπÔ∏è Nenhum usu√°rio autenticado', 'info');
            }
        });
    </script>
</body>
</html>
